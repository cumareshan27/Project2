<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Consumer View</title>
</head>

<body>

    <h1>Analytics Page</h1>
    
    <br>
   
    <button type="submit"  onClick="refreshPage()">Refresh/Clear Button</button>

    <br>

    Select Question
    <br>
    <select id="selectQuestion"> </select>
    <br> 
    <br> Hit the submit button when done.
    <br>
    
    <button onclick="makeCharts()">Generate</button>
    <br>

<h1>A graph will load here</h1>

<div id="chart"></div>

</body>

</html>

<script src="../js/reports.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  
<script>

$.get('/api/question', function(results) {
   console.log(results)
    for (var i in results) {
        var opt = $("<option>");
        opt.attr("value", results[i].questions);
        opt.test(results[i].anothersomething);
        $('select').append(opt);
    }
});

function makeCharts(){
///chart 
console.log("Make chart")

var answerOne = [1];
var answerTwo = [2];
var answerThree = [3];

var choiceName1 = ["a"];
var choiceName2 = ["b"];
var choiceName3 = ["c"];



var options = {
            chart: {
                width: 380,
                type: 'pie',
            },
        
            labels: [choiceName1, choiceName2, choiceName3],
            series: [answerOne, answerTwo, answerThree],
            responsive: [{
                breakpoint: 480,
                options: {
                    chart: {
                        width: 200
                    },
                    legend: {
                        position: 'bottom'
                    }
                }
            }]
        }
        var chart = new ApexCharts(
            document.querySelector("#chart"),
            options
        );
        chart.render();
    }


function refreshPage(){
    window.location.reload();
};

  </script>